<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
            <title>
                WSocket Client
            </title>
            <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"></link>
            <link href="https://code.getmdl.io/1.1.3/material.deep_purple-pink.min.css" rel="stylesheet"></link>
            <link href="assets/css/style.css" rel="stylesheet"></link>
            <script defer="" src="https://code.getmdl.io/1.1.3/material.min.js"></script>
        </meta>
    </head>
    <body class="mdl-demo mdl-color--grey-100 mdl-color-text--grey-700 mdl-base">
        <div class="mdl-layout__container has-scrolling-header">
            <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header has-tabs is-upgraded" data-upgraded=",MaterialLayout">
                <header class="mdl-layout__header mdl-layout__header--scroll mdl-color--primary">
                    <div class="mdl-layout__tab-bar-container">
                        <div class="mdl-layout__tab-bar-button mdl-layout__tab-bar-left-button">
                            <i class="material-icons">
                                chevron_left
                            </i>
                        </div>
                        <div class="mdl-layout__tab-bar mdl-js-ripple-effect mdl-color--primary-dark mdl-js-ripple-effect--ignore-events" data-upgraded=",MaterialRipple">
                            <a class="mdl-layout__tab is-active" href="#overview">
                                Overview
                                <span class="mdl-layout__tab-ripple-container mdl-js-ripple-effect" data-upgraded=",MaterialRipple">
                                    <span class="mdl-ripple">
                                    </span>
                                </span>
                            </a>
                        </div>
                    </div>
                </header>
                <main class="mdl-layout__content">
                    <div class="mdl-layout__tab-panel is-active" id="overview">
                        
                        <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
                            <div class="mdl-card mdl-cell mdl-cell--12-col">
                                <div class="mdl-card__supporting-text">
                                    <h4 id="title">
                                        open, send, message
                                    </h4>
                                    <form action="#">
                                        <div class="mdl-textfield mdl-js-textfield">
                                            <input class="mdl-textfield__input" type="text" id="sample1">
                                            <label class="mdl-textfield__label" for="sample1">Message...</label>
                                        </div>
                                    </form>
                                </div>
                                <div class="mdl-card__actions">
                                    <a class="mdl-button" id="open" href="javascript:;">
                                        Open
                                    </a>
                                    <a class="mdl-button" id="send" href="javascript:;">
                                        Send
                                    </a>
                                    <a class="mdl-button" id="receive" href="javascript:;">
                                        Receiving
                                    </a>
                                </div>
                            </div>
                            
                        </section>
                    </div>
                </main>
            </div>
        </div>
        <script type="text/javascript" src="../wsocket-client.js"></script>
        <script type="text/javascript">
            var act = document.querySelectorAll('a.mdl-button');
            WSC.connect('ws://localhost:3000');
            WSC.open(WSC.socket,()=>{
                console.log(WSC.socket)
                act.forEach(el => {
                    el.addEventListener('click', (e) => {
                        if(e.target.getAttribute('id') == 'send') {
                            let data = document.getElementById('sample1')
                            WSC.send(data.value)
                        }
                    })
                })
            })
        </script>
    </body>
</html>